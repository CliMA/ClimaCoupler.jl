<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Interfacer · ClimaCoupler.jl</title><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.045/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.24/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../"><img src="../assets/logo.svg" alt="ClimaCoupler.jl logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="../">ClimaCoupler.jl</a></span></div><form class="docs-search" action="../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../">Home</a></li><li><span class="tocitem">Examples</span><ul><li><input class="collapse-toggle" id="menuitem-2-1" type="checkbox"/><label class="tocitem" for="menuitem-2-1"><span class="docs-label">Sea Breeze</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../generated/sea_breeze/atmos_rhs/">Atmospheric Model</a></li><li><a class="tocitem" href="../generated/sea_breeze/land_rhs/">Land Model</a></li><li><a class="tocitem" href="../generated/sea_breeze/ocean_rhs/">Ocean Model</a></li><li><a class="tocitem" href="../generated/sea_breeze/run/">Coupled Sea Breeze</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-2-2" type="checkbox"/><label class="tocitem" for="menuitem-2-2"><span class="docs-label">AMIP</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../generated/amip/run_amip/">AMIP Driver</a></li></ul></li></ul></li><li><span class="tocitem">Coupler Interface</span><ul><li><a class="tocitem" href="../checkpointer/">Checkpointer</a></li><li><a class="tocitem" href="../conservation/">Conservation Checks</a></li><li><a class="tocitem" href="../fieldexchanger/">FieldExchanger</a></li><li><a class="tocitem" href="../fluxcalculator/">FluxCalculator</a></li><li class="is-active"><a class="tocitem" href>Interfacer</a><ul class="internal"><li><a class="tocitem" href="#Coupled-simulation"><span>Coupled simulation</span></a></li><li><a class="tocitem" href="#Component-simulations"><span>Component simulations</span></a></li><li><a class="tocitem" href="#Interfacer-API"><span>Interfacer API</span></a></li><li><a class="tocitem" href="#Interfacer-Internal-Functions-and-Types"><span>Interfacer Internal Functions and Types</span></a></li></ul></li><li><a class="tocitem" href="../timemanager/">TimeManager</a></li><li><a class="tocitem" href="../utilities/">Utilities</a></li></ul></li><li><span class="tocitem">Performance</span><ul><li><a class="tocitem" href="../performance/">Performance Analysis Tools</a></li></ul></li><li><span class="tocitem">Model Output</span><ul><li><a class="tocitem" href="../diagnostics/">Diagnostics</a></li><li><a class="tocitem" href="../leaderboard/">Leaderboard</a></li></ul></li><li><a class="tocitem" href="../contributing/">Contributing</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Coupler Interface</a></li><li class="is-active"><a href>Interfacer</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Interfacer</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/CliMA/ClimaCoupler.jl/blob/main/docs/src/interfacer.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Interfacer"><a class="docs-heading-anchor" href="#Interfacer">Interfacer</a><a id="Interfacer-1"></a><a class="docs-heading-anchor-permalink" href="#Interfacer" title="Permalink"></a></h1><p>This module contains functions that define the interface for coupling component models, as well as stub objects that contain prescribed fields. Here we explain each type of component model, and the functions that must be implemented to use a component model with ClimaCoupler.jl</p><h2 id="Coupled-simulation"><a class="docs-heading-anchor" href="#Coupled-simulation">Coupled simulation</a><a id="Coupled-simulation-1"></a><a class="docs-heading-anchor-permalink" href="#Coupled-simulation" title="Permalink"></a></h2><p>A <code>CoupledSimulation</code> stores info for ESM run and contains each of the component model simulations. We currently require that each <code>CoupledSimulation</code> contains one <code>atmos_sim</code>, and at least one surface simulation (<code>land_sim</code>, <code>ocean_sim</code>, and/or <code>ice_sim</code>). If a simulation surface type is not needed for a given run, it may be omitted.</p><h2 id="Component-simulations"><a class="docs-heading-anchor" href="#Component-simulations">Component simulations</a><a id="Component-simulations-1"></a><a class="docs-heading-anchor-permalink" href="#Component-simulations" title="Permalink"></a></h2><p>Individual component model simulations fall under <code>ComponentModelSimulation</code>, which together combine to make the <code>CoupledSimulation</code>. We have two types of <code>ComponentModelSimulations</code>: <code>AtmosModelSimulation</code> and <code>SurfaceModelSimulation</code>. The two have different requirements, which are detailed below. <code>SurfaceModelSimulation</code> is further divided into <code>SeaIceModelSimulation</code>, <code>LandModelSimulation</code>, and <code>OceanModelSimulation</code>, representing the 3 currently-supported options for surface models.</p><h3 id="ComponentModelSimulation-required-functions"><a class="docs-heading-anchor" href="#ComponentModelSimulation-required-functions">ComponentModelSimulation - required functions</a><a id="ComponentModelSimulation-required-functions-1"></a><a class="docs-heading-anchor-permalink" href="#ComponentModelSimulation-required-functions" title="Permalink"></a></h3><p>A component model simulation should be implemented as a struct that is a concrete subtype of a <code>ComponentModelSimulation</code>. This struct should contain all of the information needed to run that simulation.</p><p>Each <code>ComponentModelSimulation</code> must extend the following functions to be able to use our coupler. For some existing models, these are defined within ClimaCoupler.jl in that model’s file in <code>experiments/ClimaEarth/components/</code>, but it is preferable for these to be defined in a model’s own repository. Note that the dispatch <code>::ComponentModelSimulation</code> in the function definitions given below should be replaced with the particular component model extending these functions.</p><ul><li>constructor: construct and return an instance of the <code>ComponentModelSimulation</code>,</li></ul><p>and perform all initialization. This function should return a simulation that is ready to be stepped in the coupled simulation. The interface for this function varies across component models.</p><ul><li><code>step!(::ComponentModelSimulation, t)</code>: A function to update the</li></ul><p>simulation in-place with values calculate for time <code>t</code>. For the models we currently have implemented, this is a simple wrapper around the <code>step!</code> function implemented in SciMLBase.jl.</p><h3 id="ComponentModelSimulation-optional-functions"><a class="docs-heading-anchor" href="#ComponentModelSimulation-optional-functions">ComponentModelSimulation - optional functions</a><a id="ComponentModelSimulation-optional-functions-1"></a><a class="docs-heading-anchor-permalink" href="#ComponentModelSimulation-optional-functions" title="Permalink"></a></h3><ul><li><code>Checkpointer.get_model_prog_state(::ComponentModelSimulation)</code>:</li></ul><p>A function that returns the state vector of the simulation at its current state. This is used for checkpointing the simulation.</p><ul><li><code>Checkpointer.get_model_cache(::ComponentModelSimulation)</code>:</li></ul><p>A function that returns the cache of the simulation at its current state. This is used for checkpointing the simulation.</p><ul><li><code>Checkpointer.restore_cache(::ComponentModelSimulation, new_cache)</code>:</li></ul><p>A function that updates the cache of the simulation with the provided <code>new_cache</code>. This is used for restarting the simulation.</p><ul><li><code>get_field(::ComponentModelSimulation, ::Val{property})</code>:</li></ul><p>Default <code>get_field</code> functions are provided for <code>energy</code> and <code>water</code> fields, described in the table below. These quantities are used to track conservation, and the defaults return <code>nothing</code>. To check conservation throughout a simulation, these functions must be extended for all models being run.</p><table><tr><th style="text-align: right">Coupler name</th><th style="text-align: right">Description</th><th style="text-align: right">Units</th><th style="text-align: right">Default value</th></tr><tr><td style="text-align: right"><code>energy</code></td><td style="text-align: right">vertically integrated energy per surface area</td><td style="text-align: right">J m⁻²</td><td style="text-align: right"><code>nothing</code></td></tr><tr><td style="text-align: right"><code>water</code></td><td style="text-align: right">vertically integrated water per surface area</td><td style="text-align: right">kg m⁻²</td><td style="text-align: right"><code>nothing</code></td></tr></table><ul><li><code>add_coupler_fields!(coupler_field_names, ::ComponentModelSimulation)</code>:</li></ul><p>A set of default coupler exchange fields is initialized for each coupled simulation, but depending on the component models being run, additional coupler fields may be required. For example, the integrated land model requires the concentration of atmospheric CO2 for photosynthesis calculations, but the slab ocean does not. <code>add_coupler_fields!</code> is extended for any component model simulation that requires coupler fields in addition to the defaults, allowing us to allocate space for and exchange the extra fields only when necessary. All coupler fields are defined on the boundary space.</p><ul><li>Any additional fields specified here will likely also require an <code>update_field!</code></li></ul><p>method defined for this component model, so the coupler can update the component. They may also require a new method of <code>import_atmos_fields!</code> or <code>combine_surfaces!</code> to update the coupler fields from the component model that computes the field.</p><p>The default coupler exchange fields are the following, defined in <code>default_coupler_fields()</code> in the Interfacer module:</p><table><tr><th style="text-align: right">Coupler name</th><th style="text-align: right">Description</th><th style="text-align: right">Units</th></tr><tr><td style="text-align: right"><code>T_atmos</code></td><td style="text-align: right">atmosphere temperature at the bottom layer</td><td style="text-align: right">K</td></tr><tr><td style="text-align: right"><code>q_atmos</code></td><td style="text-align: right">atmosphere humidity at the bottom layer</td><td style="text-align: right">kg kg⁻¹</td></tr><tr><td style="text-align: right"><code>ρ_atmos</code></td><td style="text-align: right">atmosphere air density at the bottom layer</td><td style="text-align: right">kg m⁻³</td></tr><tr><td style="text-align: right"><code>z_int</code></td><td style="text-align: right">height of the first internal atmosphere level (center)</td><td style="text-align: right">m</td></tr><tr><td style="text-align: right"><code>z_sfc</code></td><td style="text-align: right">height of the bottom atmosphere layer (face)</td><td style="text-align: right">m</td></tr><tr><td style="text-align: right"><code>F_lh</code></td><td style="text-align: right">latent heat flux</td><td style="text-align: right">W m⁻²</td></tr><tr><td style="text-align: right"><code>F_sh</code></td><td style="text-align: right">sensible heat flux</td><td style="text-align: right">W m⁻²</td></tr><tr><td style="text-align: right"><code>F_turb_moisture</code></td><td style="text-align: right">turbulent moisture flux</td><td style="text-align: right">kg m⁻² s⁻¹</td></tr><tr><td style="text-align: right"><code>F_turb_ρτxz</code></td><td style="text-align: right">turbulent momentum flux in the zonal direction</td><td style="text-align: right">kg m⁻¹ s⁻²</td></tr><tr><td style="text-align: right"><code>F_turb_ρτyz</code></td><td style="text-align: right">turbulent momentum flux in the meridional direction</td><td style="text-align: right">kg m⁻¹ s⁻²</td></tr><tr><td style="text-align: right"><code>SW_d</code></td><td style="text-align: right">downward SW flux at the surface</td><td style="text-align: right">W m⁻²</td></tr><tr><td style="text-align: right"><code>LW_d</code></td><td style="text-align: right">downward LW flux at the surface</td><td style="text-align: right">W m⁻²</td></tr><tr><td style="text-align: right"><code>emissivity</code></td><td style="text-align: right">surface emissivity</td><td style="text-align: right">-</td></tr><tr><td style="text-align: right"><code>T_sfc</code></td><td style="text-align: right">surface temperature, averaged across components</td><td style="text-align: right">K</td></tr><tr><td style="text-align: right"><code>P_liq</code></td><td style="text-align: right">liquid precipitation</td><td style="text-align: right">kg m⁻² s⁻¹</td></tr><tr><td style="text-align: right"><code>P_snow</code></td><td style="text-align: right">snow precipitation</td><td style="text-align: right">kg m⁻² s⁻¹</td></tr><tr><td style="text-align: right"><code>scalar_temp1</code></td><td style="text-align: right">a surface scalar field used for intermediate calculations</td><td style="text-align: right">-</td></tr><tr><td style="text-align: right"><code>scalar_temp2</code></td><td style="text-align: right">a surface scalar field used for intermediate calculations</td><td style="text-align: right">-</td></tr><tr><td style="text-align: right"><code>scalar_temp3</code></td><td style="text-align: right">a surface scalar field used for intermediate calculations</td><td style="text-align: right">-</td></tr><tr><td style="text-align: right"><code>scalar_temp4</code></td><td style="text-align: right">a surface scalar field used for intermediate calculations</td><td style="text-align: right">-</td></tr></table><div class="admonition is-info"><header class="admonition-header">What should be stored in the coupler exchange fields?</header><div class="admonition-body"><p>In general, the coupler fields should contain exchange fields for fluxes, including turbulent fluxes, radiative fluxes, and precipitation. They also hold any quantities that a component model requires from another component. For example, the atmosphere needs surface temperature and emissivity from the surface models to compute radiation, so the coupler allocates space to exchange them. The coupler exchange fields may also hold quantities from components that are used to compute turbulent fluxes. As a general rule, we tend to store such quantities that come from the atmosphere model, but access them when needed for surface models. This is because we compute fluxes indvidually for the interface between each surface and the atmosphere model. As a result, the atmosphere quantities are used for each of these calculations, so storing them in the coupler fields allows us to avoid regridding them to the coupler space multiple times per coupling timestep.</p></div></div><ul><li><code>update_sim!(::ComponentModelSimulation, csf)</code>: A</li></ul><p>function to update each of the fields of the component model simulation that are updated by the coupler. ClimaCoupler.jl provides defaults of this function for both <code>AtmosModelSimulation</code> and <code>SurfaceModelSimulation</code> that update each of the fields expected by the coupler. This function will need to be extended for any model that requires additional fields (specified via <code>add_coupler_fields!</code>).</p><ul><li><code>set_cache!(sim::ComponentModelSimulation)</code>: A function to perform any</li></ul><p>initialization of the component model caches that isn&#39;t done during the model simulation initialization, and that must be done after the initial exchange. This is necessary, for example, when component models have cache interdependencies that must be handled in a specific order. Cache variables that are computed as part of the tendencies do not need to be set here.</p><h3 id="AtmosModelSimulation-required-functions"><a class="docs-heading-anchor" href="#AtmosModelSimulation-required-functions">AtmosModelSimulation - required functions</a><a id="AtmosModelSimulation-required-functions-1"></a><a class="docs-heading-anchor-permalink" href="#AtmosModelSimulation-required-functions" title="Permalink"></a></h3><p>In addition to the functions required for a general <code>ComponentModelSimulation</code>, an <code>AtmosModelSimulation</code> requires the following functions to retrieve and update its fields.</p><ul><li><code>get_field(::AtmosModelSimulation. ::Val{property})</code>: This getter</li></ul><p>function returns the value of the field property for the simulation in its current state. For an <code>AtmosModelSimulation</code>, it must be extended for the following properties:</p><table><tr><th style="text-align: right">Coupler name</th><th style="text-align: right">Description</th><th style="text-align: right">Units</th></tr><tr><td style="text-align: right"><code>air_density</code></td><td style="text-align: right">air density at the bottom cell centers of the atmosphere</td><td style="text-align: right">kg m⁻³</td></tr><tr><td style="text-align: right"><code>air_pressure</code></td><td style="text-align: right">air pressure at the bottom cell centers of the atmosphere</td><td style="text-align: right">Pa</td></tr><tr><td style="text-align: right"><code>air_temperature</code></td><td style="text-align: right">air temperature at the bottom cell centers of the atmosphere</td><td style="text-align: right">K</td></tr><tr><td style="text-align: right"><code>height_int</code></td><td style="text-align: right">height at the bottom cell center of the atmosphere space</td><td style="text-align: right">m</td></tr><tr><td style="text-align: right"><code>height_sfc</code></td><td style="text-align: right">height at the bottom face of the atmosphere space</td><td style="text-align: right">m</td></tr><tr><td style="text-align: right"><code>liquid_precipitation</code></td><td style="text-align: right">liquid precipitation at the surface</td><td style="text-align: right">kg m⁻² s⁻¹</td></tr><tr><td style="text-align: right"><code>SW_d</code></td><td style="text-align: right">downwelling shortwave radiation at the surface</td><td style="text-align: right">W m⁻²</td></tr><tr><td style="text-align: right"><code>LW_d</code></td><td style="text-align: right">downwelling longwave radiation at the surface</td><td style="text-align: right">W m⁻²</td></tr><tr><td style="text-align: right"><code>radiative_energy_flux_toa</code></td><td style="text-align: right">net radiative flux at the top of the atmosphere</td><td style="text-align: right">W m⁻²</td></tr><tr><td style="text-align: right"><code>snow_precipitation</code></td><td style="text-align: right">snow precipitation at the surface</td><td style="text-align: right">kg m⁻² s⁻¹</td></tr><tr><td style="text-align: right"><code>specific_humidity</code></td><td style="text-align: right">specific humidity at the bottom cell centers of the atmosphere</td><td style="text-align: right">kg kg⁻¹</td></tr><tr><td style="text-align: right"><code>turbulent_energy_flux</code></td><td style="text-align: right">aerodynamic turbulent surface fluxes of energy (sensible and latent heat)</td><td style="text-align: right">W m⁻²</td></tr><tr><td style="text-align: right"><code>turbulent_moisture_flux</code></td><td style="text-align: right">aerodynamic turbulent surface fluxes of energy (evaporation)</td><td style="text-align: right">kg m⁻² s⁻¹</td></tr><tr><td style="text-align: right"><code>u_int</code></td><td style="text-align: right">zonal wind velocity vector at the first internal model level</td><td style="text-align: right">m s⁻¹</td></tr><tr><td style="text-align: right"><code>v_int</code></td><td style="text-align: right">meridional wind velocity vector at the first internal model level</td><td style="text-align: right">m s⁻¹</td></tr></table><ul><li><code>update_field!(::AtmosModelSimulation. ::Val{property}, field)</code>:</li></ul><p>A function to update the value of property in the component model simulation, using the values in <code>field</code>. This update should be done in place. If this function isn&#39;t extended for a property, that property will remain constant throughout the simulation and a warning will be raised. This function is expected to be extended for the following properties, and may also be extended for any additional properties needed by a component model.</p><table><tr><th style="text-align: right">Coupler name</th><th style="text-align: right">Description</th><th style="text-align: right">Units</th></tr><tr><td style="text-align: right"><code>emissivity</code></td><td style="text-align: right">surface emissivity</td><td style="text-align: right"></td></tr><tr><td style="text-align: right"><code>surface_direct_albedo</code></td><td style="text-align: right">bulk direct surface albedo over the whole surface space</td><td style="text-align: right"></td></tr><tr><td style="text-align: right"><code>surface_diffuse_albedo</code></td><td style="text-align: right">bulk diffuse surface albedo over the whole surface space</td><td style="text-align: right"></td></tr><tr><td style="text-align: right"><code>surface_temperature</code></td><td style="text-align: right">temperature over the combined surface space</td><td style="text-align: right">K</td></tr><tr><td style="text-align: right"><code>turbulent_fluxes</code></td><td style="text-align: right">turbulent fluxes</td><td style="text-align: right">W m⁻²</td></tr></table><p>ClimaAtmos should also add the following coupler fields for Monin-Obukhov similarity theory: | Coupler name    | Description       | Units  | |––––––––-|–––––––––-|––––| | <code>ustar</code>         | friction velocity | m s⁻¹  | | <code>L_MO</code>          | Obukhov length    | m      | | <code>buoyancy_flux</code> | flux of buoyancy  | m⁻²s⁻³ |</p><h3 id="AtmosModelSimulation-required-functions-to-run-with-the-ClimaLandSimulation"><a class="docs-heading-anchor" href="#AtmosModelSimulation-required-functions-to-run-with-the-ClimaLandSimulation">AtmosModelSimulation - required functions to run with the ClimaLandSimulation</a><a id="AtmosModelSimulation-required-functions-to-run-with-the-ClimaLandSimulation-1"></a><a class="docs-heading-anchor-permalink" href="#AtmosModelSimulation-required-functions-to-run-with-the-ClimaLandSimulation" title="Permalink"></a></h3><p>Coupling with the integrated <code>ClimaLandSimulation</code> requires the following functions, in addition to the functions required for coupling with a general <code>SurfaceModelSimulation</code>.</p><ul><li><code>get_field(::AtmosModelSimulation. ::Val{property})</code>:</li></ul><p>This getter function must be extended for the following properties:</p><table><tr><th style="text-align: right">Coupler name</th><th style="text-align: right">Description</th><th style="text-align: right">Units</th></tr><tr><td style="text-align: right"><code>co2</code></td><td style="text-align: right">global mean co2</td><td style="text-align: right">ppm</td></tr><tr><td style="text-align: right"><code>diffuse_fraction</code></td><td style="text-align: right">fraction of downwards shortwave flux that is direct</td><td style="text-align: right"></td></tr><tr><td style="text-align: right"><code>LW_d</code></td><td style="text-align: right">downwards longwave flux</td><td style="text-align: right">W m⁻²</td></tr><tr><td style="text-align: right"><code>SW_d</code></td><td style="text-align: right">downwards shortwave flux</td><td style="text-align: right">W m⁻²</td></tr></table><div class="admonition is-info"><header class="admonition-header">Note</header><div class="admonition-body"><p><code>co2</code>, <code>diffuse_fraction</code>, <code>LW_d</code> and <code>SW_d</code> will not be present in a <code>ClimaAtmosSimulation</code> if the model is setup with no radiation. Because of this, a <code>ClimaAtmosSimulation</code> must have radiation enabled if running with the full <code>ClimaLand</code> model.</p></div></div><h3 id="SurfaceModelSimulation-required-functions"><a class="docs-heading-anchor" href="#SurfaceModelSimulation-required-functions">SurfaceModelSimulation - required functions</a><a id="SurfaceModelSimulation-required-functions-1"></a><a class="docs-heading-anchor-permalink" href="#SurfaceModelSimulation-required-functions" title="Permalink"></a></h3><p>Analogously to the <code>AtmosModelSimulation</code>, a <code>SurfaceModelSimulation</code> requires additional functions to those required for a general <code>ComponentModelSimulation</code>.</p><ul><li><code>get_field(::SurfaceModelSimulation, ::Val{property})</code>: This getter</li></ul><p>function returns the value of the field property for the simulation at the current time. For a <code>SurfaceModelSimulation</code>, it must be extended for the following properties:</p><table><tr><th style="text-align: right">Coupler name</th><th style="text-align: right">Description</th><th style="text-align: right">Units</th></tr><tr><td style="text-align: right"><code>area_fraction</code></td><td style="text-align: right">fraction of the simulation grid surface area this model covers</td><td style="text-align: right"></td></tr><tr><td style="text-align: right"><code>roughness_buoyancy</code></td><td style="text-align: right">aerodynamic roughness length for buoyancy</td><td style="text-align: right">m</td></tr><tr><td style="text-align: right"><code>roughness_momentum</code></td><td style="text-align: right">aerodynamic roughness length for momentum</td><td style="text-align: right">m</td></tr><tr><td style="text-align: right"><code>surface_direct albedo</code></td><td style="text-align: right">bulk direct surface albedo</td><td style="text-align: right"></td></tr><tr><td style="text-align: right"><code>surface_diffuse albedo</code></td><td style="text-align: right">bulk diffuse surface albedo</td><td style="text-align: right"></td></tr><tr><td style="text-align: right"><code>surface_temperature</code></td><td style="text-align: right">surface temperature</td><td style="text-align: right">K</td></tr><tr><td style="text-align: right"><code>ice_concentration</code></td><td style="text-align: right">sea ice concentration (<em>sea ice models only</em>)</td><td style="text-align: right"></td></tr></table><div class="admonition is-info"><header class="admonition-header">Note</header><div class="admonition-body"><p><code>area_fraction</code> is expected to be defined on the boundary space of the simulation, while all other fields will likely be on the simulation&#39;s own space.</p></div></div><div class="admonition is-info"><header class="admonition-header">Sea ice concentration vs. area fraction</header><div class="admonition-body"></div></div><p>Sea ice models are expected to provide both <code>area_fraction</code> and <code>ice_concentration</code>. This may seem redundant, but there are subtle differences between the two. <code>ice_concentration</code> is internal to the ice model and may be determined via a prognostic variable, prescribed data, etc. <code>area_fraction</code> is defined at the coupler level and may follow some constraints that don&#39;t apply to <code>ice_concentration</code>. For example, we require that surface model area fractions sum to 1 at all points; this constraint is enforced for <code>area_fraction</code>, but not for <code>ice_concentration</code>. Additionally, since <code>area_fraction</code> is a coupler-defined concept, it is defined on the coupler boundary space, whereas <code>ice_concentration</code> exists on the model&#39;s space. Generally, <code>ice_concentration</code> and <code>area_fraction</code> should largely agree, with differences only arising from <code>area_fraction</code> corrections and the fields existing on different spaces.</p><ul><li><code>update_field!(::SurfaceModelSimulation, ::Val{property}, field)</code>:</li></ul><p>A function to update the value of property in the component model simulation, using the values in <code>field</code> passed from the coupler This update should be done in place. If this function isn&#39;t extended for a property, that property will remain constant throughout the simulation and a warning will be raised. This function is expected to be extended for the following properties, and may also be extended for any additional properties needed by a component model.</p><table><tr><th style="text-align: right">Coupler name</th><th style="text-align: right">Description</th><th style="text-align: right">Units</th></tr><tr><td style="text-align: right"><code>area_fraction</code></td><td style="text-align: right">fraction of the simulation grid surface area this model covers</td><td style="text-align: right"></td></tr><tr><td style="text-align: right"><code>liquid_precipitation</code></td><td style="text-align: right">liquid precipitation at the surface</td><td style="text-align: right">kg m⁻² s⁻¹</td></tr><tr><td style="text-align: right"><code>SW_d</code></td><td style="text-align: right">downwelling shortwave radiation at the surface</td><td style="text-align: right">W m⁻²</td></tr><tr><td style="text-align: right"><code>LW_d</code></td><td style="text-align: right">downwelling longwave radiation at the surface</td><td style="text-align: right">W m⁻²</td></tr><tr><td style="text-align: right"><code>snow_precipitation</code></td><td style="text-align: right">snow precipitation at the surface</td><td style="text-align: right">kg m⁻² s⁻¹</td></tr><tr><td style="text-align: right"><code>turbulent_energy_flux</code></td><td style="text-align: right">aerodynamic turbulent surface fluxes of energy (sensible and latent heat)</td><td style="text-align: right">W m⁻²</td></tr><tr><td style="text-align: right"><code>turbulent_moisture_flux</code></td><td style="text-align: right">aerodynamic turbulent surface fluxes of energy (evaporation)</td><td style="text-align: right">kg m⁻² s⁻¹</td></tr></table><div class="admonition is-info"><header class="admonition-header">Note</header><div class="admonition-body"><p><code>update_field!(::SurfaceModelSimulation, ::Val{:area_fraction}, field)</code> is not required to be extended for land models, since they&#39;re assumed to have a constant area fraction.</p></div></div><h3 id="SurfaceModelSimulation-optional-functions"><a class="docs-heading-anchor" href="#SurfaceModelSimulation-optional-functions">SurfaceModelSimulation - optional functions</a><a id="SurfaceModelSimulation-optional-functions-1"></a><a class="docs-heading-anchor-permalink" href="#SurfaceModelSimulation-optional-functions" title="Permalink"></a></h3><ul><li><code>get_field(::SurfaceModelSimulation, ::Val{property})</code>:</li></ul><p>For some quantities, default <code>get_field</code> functions are provided, which may be overwritten or used as-is. These currently include the following:</p><table><tr><th style="text-align: right">Coupler name</th><th style="text-align: right">Description</th><th style="text-align: right">Units</th><th style="text-align: right">Default value</th></tr><tr><td style="text-align: right"><code>beta</code></td><td style="text-align: right">factor that scales evaporation based on its estimated level of saturation</td><td style="text-align: right"></td><td style="text-align: right">1</td></tr><tr><td style="text-align: right"><code>emissivity</code></td><td style="text-align: right">measure of how much energy a surface radiates</td><td style="text-align: right"></td><td style="text-align: right">1</td></tr><tr><td style="text-align: right"><code>height_disp</code></td><td style="text-align: right">displacement height relative to the surface</td><td style="text-align: right">m</td><td style="text-align: right">0</td></tr></table><ul><li><code>update_turbulent_fluxes!(::ComponentModelSimulation, fields::NamedTuple)</code>:</li></ul><p>This function updates the turbulent fluxes of the component model simulation at this point in horizontal space. The values are updated using the energy and moisture turbulent fluxes stored in fields which are calculated by the coupler.</p><h3 id="Prescribed-surface-conditions-SurfaceStub"><a class="docs-heading-anchor" href="#Prescribed-surface-conditions-SurfaceStub">Prescribed surface conditions - SurfaceStub</a><a id="Prescribed-surface-conditions-SurfaceStub-1"></a><a class="docs-heading-anchor-permalink" href="#Prescribed-surface-conditions-SurfaceStub" title="Permalink"></a></h3><ul><li><code>SurfaceStub</code> is a <code>SurfaceModelSimulation</code>, but it only contains required</li></ul><p>data in <code>&lt;surface_stub&gt;.cache</code>, e.g., for the calculation of surface fluxes through a prescribed surface state. This model is intended to be used for testing or as a simple stand-in model. The above adapter functions are already predefined for <code>AbstractSurfaceStub</code>, which is extended by <code>SurfaceStub</code> in the <code>surface_stub.jl</code> file, with the cache variables specified as:</p><pre><code class="nohighlight hljs">get_field(sim::AbstractSurfaceStub, ::Val{:area_fraction}) = sim.cache.area_fraction
get_field(sim::AbstractSurfaceStub, ::Val{:beta}) = sim.cache.beta
get_field(sim::AbstractSurfaceStub, ::Val{:roughness_buoyancy}) = sim.cache.z0b
get_field(sim::AbstractSurfaceStub, ::Val{:roughness_momentum}) = sim.cache.z0m
get_field(sim::AbstractSurfaceStub, ::Val{:surface_direct_albedo}) = sim.cache.α_direct
get_field(sim::AbstractSurfaceStub, ::Val{:surface_diffuse_albedo}) = sim.cache.α_diffuse
get_field(sim::AbstractSurfaceStub, ::Val{:surface_temperature}) = sim.cache.T_sfc</code></pre><p>and with the corresponding <code>update_field!</code> functions</p><pre><code class="nohighlight hljs">function update_field!(sim::AbstractSurfaceStub, ::Val{:area_fraction}, field::ClimaCore.Fields.Field)
    sim.cache.area_fraction .= field # `area_fraction` is on the boundary space, so it doesn&#39;t need remapping
end
function update_field!(sim::AbstractSurfaceStub, ::Val{:surface_temperature}, field::ClimaCore.Fields.Field)
    Interfacer.remap!(sim.cache.T_sfc, field)
end
function update_field!(sim::AbstractSurfaceStub, ::Val{:surface_direct_albedo}, field::CC.Fields.Field)
    Interfacer.remap!(sim.cache.α_direct, field)
end
function update_field!(sim::AbstractSurfaceStub, ::Val{:surface_diffuse_albedo}, field::CC.Fields.Field)
    Interfacer.remap!(sim.cache.α_diffuse, field)
end</code></pre><h2 id="Interfacer-API"><a class="docs-heading-anchor" href="#Interfacer-API">Interfacer API</a><a id="Interfacer-API-1"></a><a class="docs-heading-anchor-permalink" href="#Interfacer-API" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-binding" id="ClimaCoupler.Interfacer.CoupledSimulation" href="#ClimaCoupler.Interfacer.CoupledSimulation"><code>ClimaCoupler.Interfacer.CoupledSimulation</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">CoupledSimulation</code></pre><p>Stores information needed to run a simulation with the coupler.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CliMA/ClimaCoupler.jl/blob/48cff0a081d2fa8e6e08e8404756fbfddb7cf850/src/Interfacer.jl#L45-L48">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="ClimaCoupler.Interfacer.AtmosModelSimulation" href="#ClimaCoupler.Interfacer.AtmosModelSimulation"><code>ClimaCoupler.Interfacer.AtmosModelSimulation</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">AtmosModelSimulation</code></pre><p>An abstract type for an atmospheric model simulation.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CliMA/ClimaCoupler.jl/blob/48cff0a081d2fa8e6e08e8404756fbfddb7cf850/src/Interfacer.jl#L159-L163">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="ClimaCoupler.Interfacer.SurfaceModelSimulation" href="#ClimaCoupler.Interfacer.SurfaceModelSimulation"><code>ClimaCoupler.Interfacer.SurfaceModelSimulation</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">SurfaceModelSimulation</code></pre><p>An abstract type for surface model simulations.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CliMA/ClimaCoupler.jl/blob/48cff0a081d2fa8e6e08e8404756fbfddb7cf850/src/Interfacer.jl#L166-L170">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="ClimaCoupler.Interfacer.ComponentModelSimulation" href="#ClimaCoupler.Interfacer.ComponentModelSimulation"><code>ClimaCoupler.Interfacer.ComponentModelSimulation</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">ComponentModelSimulation</code></pre><p>An abstract type encompassing all component model (and model stub) simulations.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CliMA/ClimaCoupler.jl/blob/48cff0a081d2fa8e6e08e8404756fbfddb7cf850/src/Interfacer.jl#L152-L156">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="ClimaCoupler.Interfacer.AbstractSurfaceStub" href="#ClimaCoupler.Interfacer.AbstractSurfaceStub"><code>ClimaCoupler.Interfacer.AbstractSurfaceStub</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">AbstractSurfaceStub</code></pre><p>An abstract type representing a simple stand-in surface model. Any concrete type extending this abstract type should have a <code>cache</code> field that contains the necessary fields for the simulation, at minimum the following:     - <code>T_sfc</code> (surface temperature [K])     - <code>z0m</code> (roughness length for momentum [m])     - <code>z0b</code> (roughness length for tracers [m])     - <code>beta</code> (evaporation scaling factor)     - <code>α_direct</code> (direct albedo)     - <code>α_diffuse</code> (diffuse albedo)     - <code>area_fraction</code> (fraction of the grid cell covered by the ocean)     - <code>phase</code> (phase of the water used to calculate surface humidity)     - <code>thermo_params</code> (thermodynamic parameters)</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CliMA/ClimaCoupler.jl/blob/48cff0a081d2fa8e6e08e8404756fbfddb7cf850/src/surface_stub.jl#L1-L16">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="ClimaCoupler.Interfacer.SurfaceStub" href="#ClimaCoupler.Interfacer.SurfaceStub"><code>ClimaCoupler.Interfacer.SurfaceStub</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">SurfaceStub</code></pre><p>On object containing simulation-like info, used as a stub or for prescribed data.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CliMA/ClimaCoupler.jl/blob/48cff0a081d2fa8e6e08e8404756fbfddb7cf850/src/surface_stub.jl#L19-L23">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="ClimaCoupler.Interfacer.get_field" href="#ClimaCoupler.Interfacer.get_field"><code>ClimaCoupler.Interfacer.get_field</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">get_field(sim::AtmosModelSimulation, val::Val)</code></pre><p>A getter function that should not allocate. Here we implement a default that will raise an error if <code>get_field</code> isn&#39;t defined for all required fields of an atmosphere component model.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CliMA/ClimaCoupler.jl/blob/48cff0a081d2fa8e6e08e8404756fbfddb7cf850/src/Interfacer.jl#L182-L188">source</a></section><section><div><pre><code class="nohighlight hljs">get_field(sim::SurfaceModelSimulation, val::Val)</code></pre><p>A getter function that should not allocate. Here we implement a default that will raise an error if <code>get_field</code> isn&#39;t defined for all required fields of a surface component model.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CliMA/ClimaCoupler.jl/blob/48cff0a081d2fa8e6e08e8404756fbfddb7cf850/src/Interfacer.jl#L205-L211">source</a></section><section><div><pre><code class="nohighlight hljs">get_field(sim::ComponentModelSimulation, val::Val)</code></pre><p>Generic fallback for <code>get_field</code> that raises an error.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CliMA/ClimaCoupler.jl/blob/48cff0a081d2fa8e6e08e8404756fbfddb7cf850/src/Interfacer.jl#L228-L232">source</a></section><section><div><pre><code class="nohighlight hljs">get_field(sim, what, target_space)</code></pre><p>Return <code>quantity</code> in <code>sim</code> remapped onto the <code>target_space</code></p><p>This is equivalent to calling <code>get_field</code>, and then <code>remap</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CliMA/ClimaCoupler.jl/blob/48cff0a081d2fa8e6e08e8404756fbfddb7cf850/src/Interfacer.jl#L249-L255">source</a></section><section><div><pre><code class="nohighlight hljs">get_field(::AbstractSurfaceStub, ::Val)</code></pre><p>A getter function, that should not allocate. If undefined, it returns a descriptive error.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CliMA/ClimaCoupler.jl/blob/48cff0a081d2fa8e6e08e8404756fbfddb7cf850/src/surface_stub.jl#L30-L34">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="ClimaCoupler.Interfacer.update_field!" href="#ClimaCoupler.Interfacer.update_field!"><code>ClimaCoupler.Interfacer.update_field!</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">update_field!(::AtmosModelSimulation, ::Val, _...)</code></pre><p>Default functions for updating fields at each timestep in an atmosphere component model simulation. This should be extended by component models. If it isn&#39;t extended, the field won&#39;t be updated and a warning will be raised.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CliMA/ClimaCoupler.jl/blob/48cff0a081d2fa8e6e08e8404756fbfddb7cf850/src/Interfacer.jl#L270-L276">source</a></section><section><div><pre><code class="nohighlight hljs">update_field!(::SurfaceModelSimulation, ::Val, _...)</code></pre><p>Default functions for updating fields at each timestep in an atmosphere component model simulation. This should be extended by component models. If it isn&#39;t extended, the field won&#39;t be updated and a warning will be raised.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CliMA/ClimaCoupler.jl/blob/48cff0a081d2fa8e6e08e8404756fbfddb7cf850/src/Interfacer.jl#L288-L294">source</a></section><section><div><pre><code class="nohighlight hljs">update_field!(sim::AbstractSurfaceStub, ::Val{:area_fraction}, field::CC.Fields.Field)</code></pre><p>Updates the specified value in the cache of <code>SurfaceStub</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CliMA/ClimaCoupler.jl/blob/48cff0a081d2fa8e6e08e8404756fbfddb7cf850/src/surface_stub.jl#L44-L48">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="ClimaCoupler.Interfacer.AbstractSlabplanetSimulationMode" href="#ClimaCoupler.Interfacer.AbstractSlabplanetSimulationMode"><code>ClimaCoupler.Interfacer.AbstractSlabplanetSimulationMode</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">AbstractSlabplanetSimulationMode</code></pre><p>An abstract type representing a simulation mode for slabplanet models. Slabplanet simulations are more idealized than the AMIP configuration, but provide valuable insight about conservation and individual model behavior.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CliMA/ClimaCoupler.jl/blob/48cff0a081d2fa8e6e08e8404756fbfddb7cf850/src/Interfacer.jl#L365-L371">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="ClimaCoupler.Interfacer.AMIPMode" href="#ClimaCoupler.Interfacer.AMIPMode"><code>ClimaCoupler.Interfacer.AMIPMode</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">AMIPMode</code></pre><p>An abstract type representing the AMIP simulation mode. It runs a ClimaAtmos.jl atmosphere model, ClimaLand.jl bucket land model, a prescribed ocean model, and a simple thermal sea ice model.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CliMA/ClimaCoupler.jl/blob/48cff0a081d2fa8e6e08e8404756fbfddb7cf850/src/Interfacer.jl#L374-L379">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="ClimaCoupler.Interfacer.SubseasonalMode" href="#ClimaCoupler.Interfacer.SubseasonalMode"><code>ClimaCoupler.Interfacer.SubseasonalMode</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">SubseasonalMode</code></pre><p>An abstract type representing the subseasonal simulation mode. This mode is similar to AMIP but uses different data sources and initialization pathways tailored for subseasonal runs.</p><p>Inputs are ERA5-derived netcdfs with initial conditions produced by <code>https://github.com/CliMA/WeatherQuest</code>. Given <code>start_date</code> (YYYYMMDD) and directory <code>era5_initial_condition_dir</code>, filenames containing the initial conditions are inferred as:</p><ul><li><code>sst_processed_YYYYMMDD_0000.nc</code> (variable <code>SST</code>)</li><li><code>sic_processed_YYYYMMDD_0000.nc</code> (variable <code>SEAICE</code>)</li><li>Land IC (integrated land): <code>era5_land_processed_YYYYMMDD_0000.nc</code>, with fields<ul><li><code>skt</code> (K), <code>tsn</code> (K),<code>swe</code> (m), <code>swvl</code> (m^3/m^3), <code>si</code> (m^3/m^3), <code>sie</code> (J/m^3), <code>stl</code> (K)</li></ul></li><li>Land IC (bucket land): <code>era5_bucket_processed_YYYYMMDD_0000.nc</code>, with fields<ul><li><code>W</code> (m), <code>Ws</code> (m), <code>S</code> (m), <code>T</code> (K), <code>tsn</code> (K), <code>skt</code> (K); dims <code>(lat, lon)</code></li></ul></li></ul><p>and are used to initialize the coupler components.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CliMA/ClimaCoupler.jl/blob/48cff0a081d2fa8e6e08e8404756fbfddb7cf850/src/Interfacer.jl#L383-L399">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="ClimaCoupler.Interfacer.SlabplanetMode" href="#ClimaCoupler.Interfacer.SlabplanetMode"><code>ClimaCoupler.Interfacer.SlabplanetMode</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">SlabplanetMode</code></pre><p>An abstract type representing the slabplanet simulation mode with a ClimaAtmos.jl atmosphere model, a ClimaLand.jl bucket land model, a thermal slab ocean model, and no sea ice model. Instead of using a sea ice model, the ocean is evaluated in areas that would be covered in ice.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CliMA/ClimaCoupler.jl/blob/48cff0a081d2fa8e6e08e8404756fbfddb7cf850/src/Interfacer.jl#L411-L417">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="ClimaCoupler.Interfacer.SlabplanetAquaMode" href="#ClimaCoupler.Interfacer.SlabplanetAquaMode"><code>ClimaCoupler.Interfacer.SlabplanetAquaMode</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">SlabplanetAquaMode</code></pre><p>An abstract type representing the slabplanet simulation mode with a ClimaAtmos.jl atmosphere model, and only once surface model, a thermal slab ocean model, which is evaluated over the entire surface. There are no land or sea ice models.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CliMA/ClimaCoupler.jl/blob/48cff0a081d2fa8e6e08e8404756fbfddb7cf850/src/Interfacer.jl#L420-L426">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="ClimaCoupler.Interfacer.SlabplanetTerraMode" href="#ClimaCoupler.Interfacer.SlabplanetTerraMode"><code>ClimaCoupler.Interfacer.SlabplanetTerraMode</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">SlabplanetTerraMode</code></pre><p>An abstract type representing the slabplanet simulation mode with a ClimaAtmos.jl atmosphere model, and only once surface model, a ClimaLand.jl bucket land model, which is evaluated over the entire surface. There are no ocean or sea ice models.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CliMA/ClimaCoupler.jl/blob/48cff0a081d2fa8e6e08e8404756fbfddb7cf850/src/Interfacer.jl#L429-L435">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="ClimaCoupler.Interfacer.set_cache!" href="#ClimaCoupler.Interfacer.set_cache!"><code>ClimaCoupler.Interfacer.set_cache!</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">set_cache!(sim::ComponentModelSimulation)</code></pre><p>Perform any initialization of the component model cache that must be done after the initial exchange. This is not required to be extended, but may be necessary for some models.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CliMA/ClimaCoupler.jl/blob/48cff0a081d2fa8e6e08e8404756fbfddb7cf850/src/Interfacer.jl#L523-L529">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="ClimaCoupler.Interfacer.remap" href="#ClimaCoupler.Interfacer.remap"><code>ClimaCoupler.Interfacer.remap</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">remap(field, target_space)</code></pre><p>Remap the given <code>field</code> onto the <code>target_space</code>. If the field is already on the target space or a compatible one, it is returned unchanged.</p><p>Note that this method has a lot of allocations and is not efficient.</p><p>Non-ClimaCore fields should provide a method to this function.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CliMA/ClimaCoupler.jl/blob/48cff0a081d2fa8e6e08e8404756fbfddb7cf850/src/Interfacer.jl#L438-L447">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="ClimaCoupler.Interfacer.remap!" href="#ClimaCoupler.Interfacer.remap!"><code>ClimaCoupler.Interfacer.remap!</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">remap!(target_field, source)</code></pre><p>Remap the given <code>source</code> onto the <code>target_field</code>.</p><p>Non-ClimaCore fields should provide a method to <a href="#ClimaCoupler.Interfacer.remap"><code>Interfacer.remap</code></a>, or directly to this function.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CliMA/ClimaCoupler.jl/blob/48cff0a081d2fa8e6e08e8404756fbfddb7cf850/src/Interfacer.jl#L509-L516">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="ClimaCoupler.Interfacer.boundary_space" href="#ClimaCoupler.Interfacer.boundary_space"><code>ClimaCoupler.Interfacer.boundary_space</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">boundary_space(sim::CoupledSimulation)</code></pre><p>Return the <code>ClimaCore.Field</code> over which the exchange fields are defined.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CliMA/ClimaCoupler.jl/blob/48cff0a081d2fa8e6e08e8404756fbfddb7cf850/src/Interfacer.jl#L532-L536">source</a></section></article><h2 id="Interfacer-Internal-Functions-and-Types"><a class="docs-heading-anchor" href="#Interfacer-Internal-Functions-and-Types">Interfacer Internal Functions and Types</a><a id="Interfacer-Internal-Functions-and-Types-1"></a><a class="docs-heading-anchor-permalink" href="#Interfacer-Internal-Functions-and-Types" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-binding" id="ClimaCoupler.Interfacer.AbstractSimulation" href="#ClimaCoupler.Interfacer.AbstractSimulation"><code>ClimaCoupler.Interfacer.AbstractSimulation</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">AbstractSimulation</code></pre><p>An abstract super-type representing a simulation.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CliMA/ClimaCoupler.jl/blob/48cff0a081d2fa8e6e08e8404756fbfddb7cf850/src/Interfacer.jl#L38-L42">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="ClimaCoupler.Interfacer.AbstractSimulationMode" href="#ClimaCoupler.Interfacer.AbstractSimulationMode"><code>ClimaCoupler.Interfacer.AbstractSimulationMode</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">AbstractSimulationMode</code></pre><p>An abstract type representing a simulation mode.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CliMA/ClimaCoupler.jl/blob/48cff0a081d2fa8e6e08e8404756fbfddb7cf850/src/Interfacer.jl#L358-L362">source</a></section></article></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../fluxcalculator/">« FluxCalculator</a><a class="docs-footer-nextpage" href="../timemanager/">TimeManager »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.25 on <span class="colophon-date" title="Friday 31 October 2025 22:19">Friday 31 October 2025</span>. Using Julia version 1.11.7.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
